# c-learning

### 1.1 C语言的起源<br>
1972年，贝尔实验室的丹尼斯·里奇（Dennis Ritch）和肯·汤普逊（Ken
Thompson）在开发UNIX操作系统时设计了C语言。

在B语言（汤普逊发明）的基础上进行设计。至于 B
语言的起源，那是另一个故事。C 语言设计的初衷是将其作为程序员使用的
一种编程工具。例
如，Pascal 的主要目标是为更好地学习编程原理提供扎实的基础；而BASIC
的主要目标是开发出类似英文的语言，让不熟悉计算机的学生轻松学习编
程。

C语言的设计理念让用户能轻松地完成自顶向下的规划、结构化编程和模块化设
计。

### 1.2.2 高效性<br>
C是高效的语言。在设计上，它充分利用了当前计算机的优势，因此 C
程序相对更紧凑，而且运行速度很快。实际上，C 语言具有通常是汇编语言
才具有的微调控制能力（汇编语言是为特殊的中央处理单元设计的一系列内
部指令，使用助记符来表示；不同的 CPU 系列使用不同的汇编语言），可
以根据具体情况微调程序以获得最大运行速度或最有效地使用内存。

### 1.2.3 可移植性<br>
C是可移植的语言。这意味着，在一种系统中编写的 C程序稍作修改或
不修改就能在其他系统运行。如需修改，也只需简单更改主程序头文件中的
少许项即可。大部分语言都希望成为可移植语言，但是，如果经历过把IBM
PC BASIC程序转换成苹果BASIC（两者是近亲），或者在UNIX系统中运行
IBM大型机的FORTRAN程序的人都知道，移植是最麻烦的事。C语言是可移
植方面的佼佼者。从8位微处理器到克雷超级计算机，许多计算机体系结构
都可以使用C编译器（C编译器是把C代码转换成计算机内部指令的程序）。
但是要注意，程序中针对特殊硬件设备（如，显示监视器）或操作系统特殊
功能（如，Windows 8或OS X）编写的部分，通常是不可移植的。
由于C语言与UNIX关系密切，UNIX系统通常会将C编译器作为软件包的
一部分。安装Linux时，通常也会安装C编译器。供个人计算机使用的C编译
器很多，运行各种版本的Windows和Macintosh（即， Mac）的PC都能找到
合适的C编译器。因此，无论是使用家庭计算机、专业工作站，还是大型
机，都能找到针对特定系统的C编译器。

### 1.2.4 强大而灵活<br>
C语言功能强大且灵活。例如，功能强大且灵活的UNIX操作系统，大部分是用C语言写的；其他语言（如，
FORTRAN、Perl、Python、Pascal、LISP、Logo、BASIC）的许多编译器和
解释器都是用C语言编写的。因此，在UNIX机上使用FORTRAN时，最终是
由C程序生成最后的可执行程序。C程序可以用于解决物理学和工程学的问
题，甚至可用于制作电影的动画特效。

### 1.2.5 面向程序员<br>
C 语言是为了满足程序员的需求而设计的，程序员利用 C 可以访问硬
件、操控内存中的位。C 语言有丰富的运算符，能让程序员简洁地表达自己
的意图。C没有Pascal严谨，但是却比C++的限制多。这样的灵活性既是优点
也是缺点。优点是，许多任务用C来处理都非常简洁（如，转换数据的格
式）；缺点是，你可能会犯一些莫名其妙的错误，这些错误不可能在其他语
言中出现。C 语言在提供更多自由的同时，也让使用者承担了更大的责任。
另外，大多数C实现都有一个大型的库，包含众多有用的C函数。这些
函数用于处理程序员经常需要解决的问题。

### 1.2.6 缺点<br>
人无完人，金无足赤。C语言也有一些缺点。例如，前面提到的，要享
受用C语言自由编程的乐趣，就必须承担更多的责任。特别是，C语言使用
指针，而涉及指针的编程错误往往难以察觉。有句话说的好：想拥有自由就
必须时刻保持警惕。
C 语言紧凑简洁，结合了大量的运算符。正因如此，我们也可以编写出
让人极其费解的代码。虽然没必要强迫自己编写晦涩的代码，但是有兴趣写
写也无妨。试问，除 C语言外还为哪种语言举办过年度混乱代码大赛

### 1.3 C语言的应用范围<br>
早在20世纪80年代，C语言就已经成为小型计算机（UNIX系统）使用的
主流语言。从那以后，C语言的应用范围扩展到微型机（个人计算机）和大
型机（庞然大物）。如图1.2所示，许多软件公司都用C语言来开发文字处理
程序、电子表格、编译器和其他产品，因为用 C语言编写的程序紧凑而高
效。更重要的是，C程序很方便修改，而且移植到新型号的计算机中也没什
么问题。

20世纪90年代，许多软件公司开始改用C++来开发大型的编程项目。
C++在C语言的基础上嫁接了面向对象编程工具（面向对象编程是一门哲
学，它通过对语言建模来适应问题，而不是对问题建模以适应语言）。
C++几乎是C的超集，这意味着任何C程序差不多就是一个C++程序。学习C
语言，也相当于学习了许多C++的知识

C 语言已成为嵌入式系统编程的流行语言。也就是说，越来越多的汽车、照相机、DVD 播
放机和其他现代化设备的微处理器都用 C 语言进行编程。除此之外，C 语
言还从长期被FORTRAN独占的科学编程领域分得一杯羹。最终，作为开发
操作系统的卓越语言，C在Linux开发中扮演着极其重要的角色。因此，在进
入21世纪的第2个10年中，C语言仍然保持着强劲的势头。

### 1.4 计算机能做什么
在学习如何用C语言编程之前，最好先了解一下计算机的工作原理。这
些知识有助于你理解用C语言编写程序和运行C程序时所发生的事情之间有
什么联系。

下面介绍两个有趣的知识。其一，储存在计算机中的所有内容都是数
字。计算机以数字形式储存数字和字符（如，在文本文档中使用的字母）。
每个字符都有一个数字码。计算机载入寄存器的指令也以数字形式储存，指
令集中的每条指令都有一个数字码。其二，计算机程序最终必须以数字指令
码（即，机器语言）来表示。
简而言之，计算机的工作原理是：如果希望计算机做某些事，就必须为
其提供特殊的指令列表（程序），确切地告诉计算机要做的事以及如何做。

你必须用计算机能直接明白的语言（机器语言）创建程序。这是一项繁琐、
乏味、费力的任务。计算机要完成诸如两数相加这样简单的事，就得分成类
似以下几个步骤。
#### 1.从内存位置2000上把一个数字拷贝到寄存器1。
#### 2.从内存位置2004上把另一个数字拷贝到寄存器2。
#### 3.把寄存器2中的内容与寄存器1中的内容相加，把结果储存在寄存器1中。
#### 4.把寄存器1中的内容拷贝到内存位置2008。
而你要做的是，必须用数字码来表示以上的每个步骤！
如果以这种方式编写程序很合你的意，那不得不说抱歉，因为用机器语
言编程的黄金时代已一去不复返。

### 1.5 高级计算机语言和编译器
高级编程语言（如，C）以多种方式简化了编程工作。首先，不必用数
字码表示指令；其次，使用的指令更贴近你如何想这个问题，而不是类似计
算机那样繁琐的步骤。使用高级编程语言，可以在更抽象的层面表达你的想
法，不用考虑CPU在完成任务时具体需要哪些步骤。例如，对于两数相加，
可以这样写：
total = mine + yours;<br>
`对我们而言，光看这行代码就知道要计算机做什么；而看用机器语言写
成的等价指令（多条以数字码形式表现的指令）则费劲得多。但是，对计算
机而言却恰恰相反。在计算机看来，高级指令就是一堆无法理解的无用数
据。编译器在这里派上了用场。编译器是把高级语言程序翻译成计算机能理
解的机器语言指令集的程序。程序员进行高级思维活动，而编译器则负责处
理冗长乏味的细节工作。`<br>
编译器还有一个优势。一般而言，不同CPU制造商使用的指令系统和编
码格式不同。例如，用Intel Core i7 （英特尔酷睿i7）CPU编写的机器语言程
序对于ARM Cortex-A57 CPU而言什么都不是。但是，可以找到与特定类型
CPU匹配的编译器。因此，使用合适的编译器或编译器集，便可把一种高级
语言程序转换成供各种不同类型 CPU 使用的机器语言程序。一旦解决了一
个编程问题，便可让不同编译器集翻译成不同 CPU 使用的机器语言。

简而言之，高级语言（如C、Java、Pascal）以更抽象的方式描述行
为，不受限于特定CPU或指令集。而且，高级语言简单易学，用高级语言编
程比用机器语言编程容易得多。

~~1964年，控制数据公司（Control Data Corporation）研制出了CDC 6600
计算机。~~ 1964 年，在工程和科学领域的主流编程语言是 FORTRAN。虽然编程语
言不如硬件发展那么突飞猛进，但是也发生了很大变化。为了应对越来越大
型的编程项目，语言先后为结构化编程和面向对象编程提供了更多的支持。
随着时间的推移，不仅新语言层出不穷，而且现有语言也会发生变化。

### 1.6 语言标准
目前，有许多C实现可用。在理想情况下，编写C程序时，假设该程序
中未使用机器特定的编程技术，那么它的运行情况在任何实现中都应该相
同。要在实践中做到这一点，不同的实现要遵循同一个标准。
C语言发展之初，并没有所谓的C标准。1987年，布莱恩·柯林汉（Brian
Kernighan）和丹尼斯·里奇（Dennis Ritchie）合著的The C Programming
Language（《C语言程序设计》）第1版是公认的C标准，通常称之为K&R C
或经典C。特别是，该书中的附录中的“C语言参考手册”已成为实现C的指导
标准。例如，编译器都声称提供完整的K&R实现。虽然这本书中的附录定
义了C语言，但却没有定义C库。与大多数语言不同的是，C语言比其他语言
更依赖库，因此需要一个标准库。实际上，由于缺乏官方标准，UNIX实现
提供的库已成为了标准库。
### 1.6.1 第1个ANSI/ISO C标准
随着C的不断发展，越来越广泛地应用于更多系统中，C社区意识到需
要一个更全面、更新颖、更严格的标准。鉴于此，美国国家标准协会
（ANSI）于 1983 年组建了一个委员会（X3J11），开发了一套新标准，并
于1989年正式公布。该标准（ANSI C）定义了C语言和C标准库。国际标准
化组织于1990年采用了这套C标准（ISO C）。ISO C和ANSI C是完全相同的
标准。ANSI/ISO标准的最终版本通常叫作C89（因为ANSI于1989年批准该标
准）或C90（因为ISO于1990年批准该标准）。另外，由于ANSI先公布C标
准，因此业界人士通常使用ANSI C。
在该委员会制定的指导原则中，最有趣的可能是：保持 C的精神。委员
会在表述这一精神时列出了以下几点：
信任程序员；
不要妨碍程序员做需要做的事；
保持语言精练简单；
只提供一种方法执行一项操作；
让程序运行更快，即使不能保证其可移植性。
在最后一点上，标准委员会的用意是：作为实现，应该针对目标计算机
来定义最合适的某特定操作，而不是强加一个抽象、统一的定义。在学习C
语言过程中，许多方面都反映了这一哲学思想。
### 1.6.2 C99标准
1994年，ANSI/ISO联合委员会（C9X委员会）开始修订C标准，最终发
布了C99标准。该委员会遵循了最初C90标准的原则，包括保持语言的精练
简单。委员会的用意不是在C语言中添加新特性，而是为了达到新的目标。
第1个目标是，支持国际化编程。例如，提供多种方法处理国际字符集。第2
个目标是，“调整现有实践致力于解决明显的缺陷”。因此，在遇到需要将C
移至64位处理器时，委员会根据现实生活中处理问题的经验来添加标准。第
3个目标是，为适应科学和工程项目中的关键数值计算，提高C的适应性，
让C比FORTRAN更有竞争力。
这3点（国际化、弥补缺陷和提高计算的实用性）是主要的修订目标。
在其他方面的改变则更为保守，例如，尽量与C90、C++兼容，让语言在概
念上保持简单。用委员会的话说：“„„委员会很满意让C++成为大型、功能
强大的语言”。
C99的修订保留了C语言的精髓，C仍是一门简洁高效的语言。本书指出
了许多C99修改的地方。虽然该标准已发布了很长时间，但并非所有的编译
器都完全实现C99的所有改动。因此，你可能发现C99的一些改动在自己的
系统中不可用，或者只有改变编译器的设置才可用。
### 1.6.3 C11标准
维护标准任重道远。标准委员会在2007年承诺C标准的下一个版本是
C1X，2011年终于发布了C11标准。此次，委员会提出了一些新的指导原
则。出于对当前编程安全的担忧，不那么强调“信任程序员”目标了。而且，
供应商并未像对C90那样很好地接受和支持C99。这使得C99的一些特性成为
C11的可选项。因为委员会认为，不应要求服务小型机市场的供应商支持其
目标环境中用不到的特性。另外需要强调的是，修订标准的原因不是因为原
标准不能用，而是需要跟进新的技术。例如，新标准添加了可选项支持当前
使用多处理器的计算机。对于C11标准，我们浅尝辄止，深入分析这部分内
容已超出本书讨论的范围。
注意
本书使用术语ANSI C、ISO C或ANSI/ISO C讲解C89/90和较新标准共有
的特性，用C99或C11介绍新的特性。有时也使用C90（例如，讨论一个特性
被首次加入C语言时）。

### 1.7 使用C语言的7个步骤
#### 1 定义程序的目标
#### 2 设计程序
#### 3 编写代码 
#### 4 编译






